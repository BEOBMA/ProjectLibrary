package org.beobma.projectlibrary.listener



class OnPlayerQuickEvent : Listener {

    @EventHandler
    fun OnPlayerQuick(event: PlayerQuitEvent) {
        val player = event.player

        if (!Info.isGaming() && !Info.IsStarting()) return
        if (player !in Info.game.players) return

        val playerList = Info.game.toMutableList()
        playerList.remove(player)
        Info.game = playerList.toList()

        player.inventory.clear()
        player.stopAllSounds()         
        player.clearActivePotionEffects()
        player.gameMode = GameMode.ADVENTURE
        player.maxHealth = 20.0
        player.health = 20.0
        player.scoreboardTags.toList().forEach { tag ->
            player.scoreboardTags.remove(tag)
        }
        player.teleport(Location(world, 2.5, -60.0, 0.5, 90f, 0f))
        ProjectLibrary.loggerInfo("[ProjectLibrary] player ${player.name} reset success")
    }
}